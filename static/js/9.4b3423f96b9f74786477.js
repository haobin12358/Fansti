webpackJsonp([9],{InGW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mYEk"),i=a("P9l9"),n=a("mtWM"),o=a.n(n),r={name:"white_list",data:function(){return{query:[],dialogFormVisible:!1,dynamicValidateForm:{phones:[],phone:""}}},components:{page:s.a},methods:{editPhone:function(e,t){var a=this;if("add"==t){var s=this,n=[];this.$refs[e].validate(function(r){if(!r)return console.log("error submit!!"),!1;n.push(s.dynamicValidateForm.phone);for(var l=0;l<s.dynamicValidateForm.phones.length;l++)n.push(s.dynamicValidateForm.phones[l].value);var d={control:t,phone_list:n};o.a.post(i.a.update_phone,d).then(function(t){200==t.data.status?(a.getData(),a.dialogFormVisible=!1,a.$message({type:"success",message:t.data.message}),a.$refs[e].resetFields()):a.$message.error(t.data.message)},function(e){a.$message.error(e.data.message)})})}else if("delete"==t){var r=[];r[0]=e;var l={control:t,phone_list:r};o.a.post(i.a.update_phone,l).then(function(e){console.log(e),200==e.data.status?(a.getData(),a.$message({type:"success",message:e.data.message})):a.$message.error(e.data.message)},function(e){a.$message.error(e.data.message)})}},removeDomain:function(e){var t=this.dynamicValidateForm.phones.indexOf(e);-1!==t&&this.dynamicValidateForm.phones.splice(t,1)},addDomain:function(){this.dynamicValidateForm.phones.push({value:"",key:Date.now()})},getData:function(){var e=this;o.a.get(i.a.get_phone).then(function(t){200==t.data.status?e.query=t.data.data:e.$message.error(t.data.message)},function(t){e.$message.error(t.data.message)})}},created:function(){this.getData()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"page-box"},[a("el-button",{staticClass:"add-btn",on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加白名单")]),e._v(" "),a("el-dialog",{attrs:{title:"添加白名单",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"phone",label:"手机号：",rules:[{required:!0,message:"请输入手机号",trigger:"blur"}]}},[a("el-input",{staticClass:"phone-input",model:{value:e.dynamicValidateForm.phone,callback:function(t){e.$set(e.dynamicValidateForm,"phone",t)},expression:"dynamicValidateForm.phone"}})],1),e._v(" "),e._l(e.dynamicValidateForm.phones,function(t,s){return a("el-form-item",{key:t.key,attrs:{label:"手机号：",prop:"phones."+s+".value",rules:{required:!0,message:"请输入手机号",trigger:"blur"}}},[a("el-input",{staticClass:"phone-input",model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}),e._v(" "),a("el-button",{staticClass:"cancel-btn",attrs:{size:"small"},on:{click:function(a){a.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)}),e._v(" "),a("el-form-item",{staticClass:"bottom-button"},[a("el-button",{staticClass:"cancel-btn",attrs:{size:"medium"},on:{click:e.addDomain}},[e._v("新增")]),e._v(" "),a("el-button",{staticClass:"add-done",attrs:{size:"medium"},on:{click:function(t){e.editPhone("dynamicValidateForm","add")}}},[e._v("提交")])],1)],2)],1)],1),e._v(" "),a("div",{staticClass:"m-table"},[a("table",{attrs:{width:"100%"}},[e._m(0),e._v(" "),a("tbody",[e._l(e.query,function(t,s){return[a("tr",[a("td",[e._v(e._s(s+1))]),e._v(" "),a("td",[e._v(e._s(t))]),e._v(" "),a("td",[a("div",{staticStyle:{color:"#5A738A"},on:{click:function(a){e.editPhone(t,"delete")}}},[e._v("删除")])])])]})],2)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("td",{attrs:{width:"35%"}},[this._v("序号")]),this._v(" "),t("td",{attrs:{width:"35%"}},[this._v("手机号")]),this._v(" "),t("td",[this._v("操作")])])])}]};var d=a("VU/8")(r,l,!1,function(e){a("PHDO")},"data-v-2f591c34",null);t.default=d.exports},PHDO:function(e,t){}});
//# sourceMappingURL=9.4b3423f96b9f74786477.js.map