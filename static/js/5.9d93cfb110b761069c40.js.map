{"version":3,"sources":["webpack:///src/views/white_list.vue","webpack:///./src/views/white_list.vue?3ee8","webpack:///./src/views/white_list.vue"],"names":["white_list","name","data","query","dialogFormVisible","dynamicValidateForm","phones","phone","components","page","methods","editPhone","formName","control","_this","this","that","phoneList","$refs","validate","valid","console","log","push","i","length","value","params","phone_list","axios_default","a","post","api","update_phone","then","res","status","getData","$message","type","message","resetFields","error","removeDomain","item","index","indexOf","splice","addDomain","key","Date","now","_this2","get","get_phone","created","views_white_list","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","_v","attrs","title","visible","update:visible","ref","model","label-width","prop","label","rules","required","trigger","callback","$$v","$set","expression","_l","domain","size","preventDefault","width","_m","_s","staticStyle","color","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.9d93cfb110b761069c40.js","sourcesContent":["<template>\n  <div>\n    <div class=\"page-box\">\n      <el-button class=\"add-btn\" @click=\"dialogFormVisible = true\">添加白名单</el-button>\n      <el-dialog title=\"添加白名单\" :visible.sync=\"dialogFormVisible\">\n        <el-form :model=\"dynamicValidateForm\" ref=\"dynamicValidateForm\" label-width=\"100px\" class=\"demo-dynamic\">\n          <el-form-item prop=\"phone\" label=\"手机号：\"\n                        :rules=\"[\n                          { required: true, message: '请输入手机号', trigger: 'blur' }\n                        ]\">\n            <el-input v-model=\"dynamicValidateForm.phone\" class=\"phone-input\"></el-input>\n          </el-form-item>\n          <el-form-item v-for=\"(domain, index) in dynamicValidateForm.phones\" label=\"手机号：\" :key=\"domain.key\" :prop=\"'phones.' + index + '.value'\"\n            :rules=\"{ required: true, message: '请输入手机号', trigger: 'blur' }\">\n            <el-input v-model=\"domain.value\" class=\"phone-input\"></el-input>\n            <el-button @click.prevent=\"removeDomain(domain)\" class=\"cancel-btn\" size=\"small\">删除</el-button>\n          </el-form-item>\n          <el-form-item class=\"bottom-button\">\n            <el-button @click=\"addDomain\" class=\"cancel-btn\" size=\"medium\">新增</el-button>\n            <el-button @click=\"editPhone('dynamicValidateForm', 'add')\" class=\"add-done\" size=\"medium\">提交</el-button>\n          </el-form-item>\n        </el-form>\n      </el-dialog>\n    </div>\n    <div class=\"m-table\">\n      <table width=\"100%\">\n        <thead>\n        <tr>\n          <td width=\"35%\">序号</td>\n          <td width=\"35%\">手机号</td>\n          <td>操作</td>\n        </tr>\n        </thead>\n        <tbody>\n        <template v-for=\"(item,index) in query\">\n          <tr>\n            <td>{{index+1}}</td>\n            <td>{{item}}</td>\n            <td>\n              <div @click=\"editPhone(item, 'delete')\" style=\"color: #5A738A\">删除</div>\n            </td>\n          </tr>\n        </template>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\n  import page from '../components/common/page';\n  import api from \"../api/api\";\n  import axios from 'axios';\n\n  export default {\n    name: \"white_list\",\n    data() {\n      return {\n        query: [],\n        dialogFormVisible: false,\n        dynamicValidateForm: {\n          phones: [\n            // { value: '' }\n          ],\n          phone: ''\n        },\n      }\n    },\n    components:{ page },\n    methods: {\n      editPhone(formName, control) {\n        if(control == 'add') {\n          let that = this\n          let phoneList = []\n          this.$refs[formName].validate((valid) => {\n            if (valid) {\n              phoneList.push(that.dynamicValidateForm.phone)\n              for(let i=0;i<that.dynamicValidateForm.phones.length;i++) {\n                phoneList.push(that.dynamicValidateForm.phones[i].value)\n              }\n              let params = {\n                control: control,\n                phone_list: phoneList\n              }\n              axios.post(api.update_phone, params).then(res=>{\n                if(res.data.status == 200){\n                  this.getData()\n                  this.dialogFormVisible = false\n                  this.$message({ type: 'success', message: res.data.message });\n                  this.$refs[formName].resetFields();\n                }else{\n                  this.$message.error(res.data.message);\n                }\n              }, res=>{\n                this.$message.error(res.data.message);\n              });\n            } else {\n              console.log('error submit!!');\n              return false;\n            }\n          });\n        }else if(control == 'delete') {\n          let phone_list = []\n          phone_list[0] = formName\n          let params = {\n            control: control,\n            phone_list: phone_list\n          }\n          axios.post(api.update_phone, params).then(res=>{\n            console.log(res)\n            if(res.data.status == 200){\n              this.getData()\n              this.$message({ type: 'success', message: res.data.message });\n            }else{\n              this.$message.error(res.data.message);\n            }\n          }, res=>{\n            this.$message.error(res.data.message);\n          });\n        }\n      },\n      removeDomain(item) {\n        var index = this.dynamicValidateForm.phones.indexOf(item)\n        if (index !== -1) {\n          this.dynamicValidateForm.phones.splice(index, 1)\n        }\n      },\n      addDomain() {\n        this.dynamicValidateForm.phones.push({\n          value: '',\n          key: Date.now()\n        });\n      },\n      getData(){\n        axios.get(api.get_phone).then(res => {\n          if (res.data.status == 200){\n            this.query = res.data.data\n            // console.log(this.query)\n          }else{\n            this.$message.error(res.data.message);\n          }\n        },error => {\n          this.$message.error(error.data.message);\n        })\n      }\n    },\n    created() {\n      this.getData()\n    }\n  }\n</script>\n\n<style lang=\"less\" rel=\"stylesheet/less\" scoped>\n  @import \"../common/css/_variate.less\";\n  .m-table{\n    width: 14.4rem;\n    table{\n      thead{\n        td{\n          text-align: center;\n          font-size: 0.18rem;\n          font-weight: 600;\n          padding-bottom: 0.2rem;\n        }\n      }\n      tbody{\n        td{\n          text-align: center;\n          border-bottom: 1px solid @borderColor;\n          padding: 0.23rem 0;\n        }\n      }\n    }\n  }\n  .page-box{\n    .add-btn {\n      margin: 0 0 1% 86%;\n      color: @bgMainColor;\n      background-color: @btnActiveColor;\n    }\n    .bottom-button {\n      margin-bottom: 0;\n      margin-left: 42%;\n      .add-done {\n        color: @bgMainColor;\n        background-color: @btnActiveColor;\n      }\n    }\n    .phone-input {\n      width: 78%;\n    }\n    .cancel-btn {\n      color: #000000;\n      margin-left: 5%;\n      border-color: @blueBorderColor;\n      background-color: #ffffff;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/white_list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"page-box\"},[_c('el-button',{staticClass:\"add-btn\",on:{\"click\":function($event){_vm.dialogFormVisible = true}}},[_vm._v(\"添加白名单\")]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"添加白名单\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"dynamicValidateForm\",staticClass:\"demo-dynamic\",attrs:{\"model\":_vm.dynamicValidateForm,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"prop\":\"phone\",\"label\":\"手机号：\",\"rules\":[\n                        { required: true, message: '请输入手机号', trigger: 'blur' }\n                      ]}},[_c('el-input',{staticClass:\"phone-input\",model:{value:(_vm.dynamicValidateForm.phone),callback:function ($$v) {_vm.$set(_vm.dynamicValidateForm, \"phone\", $$v)},expression:\"dynamicValidateForm.phone\"}})],1),_vm._v(\" \"),_vm._l((_vm.dynamicValidateForm.phones),function(domain,index){return _c('el-form-item',{key:domain.key,attrs:{\"label\":\"手机号：\",\"prop\":'phones.' + index + '.value',\"rules\":{ required: true, message: '请输入手机号', trigger: 'blur' }}},[_c('el-input',{staticClass:\"phone-input\",model:{value:(domain.value),callback:function ($$v) {_vm.$set(domain, \"value\", $$v)},expression:\"domain.value\"}}),_vm._v(\" \"),_c('el-button',{staticClass:\"cancel-btn\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){$event.preventDefault();_vm.removeDomain(domain)}}},[_vm._v(\"删除\")])],1)}),_vm._v(\" \"),_c('el-form-item',{staticClass:\"bottom-button\"},[_c('el-button',{staticClass:\"cancel-btn\",attrs:{\"size\":\"medium\"},on:{\"click\":_vm.addDomain}},[_vm._v(\"新增\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"add-done\",attrs:{\"size\":\"medium\"},on:{\"click\":function($event){_vm.editPhone('dynamicValidateForm', 'add')}}},[_vm._v(\"提交\")])],1)],2)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"m-table\"},[_c('table',{attrs:{\"width\":\"100%\"}},[_vm._m(0),_vm._v(\" \"),_c('tbody',[_vm._l((_vm.query),function(item,index){return [_c('tr',[_c('td',[_vm._v(_vm._s(index+1))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(item))]),_vm._v(\" \"),_c('td',[_c('div',{staticStyle:{\"color\":\"#5A738A\"},on:{\"click\":function($event){_vm.editPhone(item, 'delete')}}},[_vm._v(\"删除\")])])])]})],2)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('td',{attrs:{\"width\":\"35%\"}},[_vm._v(\"序号\")]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"35%\"}},[_vm._v(\"手机号\")]),_vm._v(\" \"),_c('td',[_vm._v(\"操作\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c3de8ada\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/white_list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c3de8ada\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./white_list.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./white_list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./white_list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c3de8ada\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./white_list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c3de8ada\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/white_list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}